<!DOCTYPE html>
<script>
    function timeString(now) {
        return now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }

    function updateTitle() {
        var title = timeString(new Date());
        var time_remaining = g_meeting_time - new Date();

        if (time_remaining > 0 &&
                time_remaining < 900000) {
            title = '\u26a0 '+ title +' \u26a0';
        }

        window.document.title = title;
    }

    function setMeetingTime() {
        var date = new Date();

        g_meeting_time = new Date(
                date.getFullYear(),
                date.getMonth(),
                date.getDate(),
                Number(document.forms[0].elements['hour'].value) +
                        Number(document.forms[0].elements['meridiem'].value),
                Number(document.forms[0].elements['minute'].value),
        );

        updateTitle();
    }

    function generateOptions(low, high, obj, pad) {
        for (var i = low; i <= high; i++) {
            if (i < 10 && pad) pad = '0';
            else pad = '';
            obj.add(new Option(pad+i, i));
        }
    }

    function initialize() {
        g_meeting_time = null;
        updateTitle();
        setInterval(updateTitle, 1000);

        generateOptions(1, 12, document.forms[0].elements['hour']);
        generateOptions(0, 59, document.forms[0].elements['minute'], true);
    }
</script>
<html>
<body onload="initialize()">

<h1>The time will show up in the title tab</h1>
<p>This app thanks to Kent Beck & ...</p>

<p>Self testing results: green</p>

<form>
    Select meeting time:
    <select id="hour" name="hour" onchange="setMeetingTime()"></select>
    <strong>:</strong>
    <select id="minute" name="minute" onchange="setMeetingTime()"></select>
    <select id="meridiem" name="meridiem" onchange="setMeetingTime()">
        <option value="12">pm</option>
        <option value="0">am</option>
    </select>
</form>

</body>
</html>
